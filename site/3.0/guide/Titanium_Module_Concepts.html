<!DOCTYPE html><html lang="ko"><head><title>Titanium Module_Concepts</title><meta charset="utf-8"><meta name="description" content="Titanium Guide"><link rel="stylesheet" href="/titanium-guide-kr/stylesheets/stylesheet.css" media="screen"></head><body></body><!-- HEADER --><div id="header_wrap" class="outer"><header class="inner"><a id="forkme_banner" href="https://github.com/miconblog/titanium-guide-kr">View on GitHub</a><h1 id="project_title">Titanium Module_Concepts</h1></header></div><div id="main_content_wrap" class="outer"><section id="main_content" class="inner"><p>타이타늄 API는 서로 관련된 메소드와 속성 그리고 상수들의 집합으로 <em>모듈군(modules-collections)</em>을 구성하고, 여기에는 여러 타입의 모듈이 있다.</p>

<ul>
<li>타이타늄 네임스페이스는 <em>Titanium.UI</em>와 <em>Titanium.Geolocation</em>과 같은 내장 모듈로 구성된다. 이런 모듈들은 타이타늄 애플리케이션에서 언제든지 사용할수있다. </li>
<li>패키지형태의 모듈은 타이타늄 API를 확장할수 있는 모듈로써 <em>require</em> 메소드를 이용해 애플리케이션에 임포트된다. 이렇게 임포트된 모듈은 <em>ti.cloud</em>와 같은 식별자를 이용해 사용되고 네이티브 코드와 자바스크립트를 이용해 만들수있다. 모듈은 앱셀러레이터 마켓에서 구매하거나 깃허브 같은데서 오픈 소스를 받아다 쓸수도 있다. </li>
<li>CommonJS 모듈은 애플리케이션을 보다 구조화하고 코드를 좀더 깔끔하게 만들어준다. 패키지형태의 모듈과 다르게 CommonJS 모듈은 타이타늄 스튜디오나 <em>타이타늄 커맨드-라인</em> 인터페이스로 관리하지 않기 때문에 임포트하려면 프로젝트 <em>Resources</em>폴더에 해당 모듈을 복사해 넣고 절대경로나 상대경로를 이용해 로드 야한다. </li>
</ul>

<p>이번 섹션은 패키지형태의 모듈을 이용해 타이타늄 API를 확장하는 방법에 대해 다룬다. 물론 여러분이 만든 모듈을 앱셀러레이터를 통해 판매할수도 있다.</p>

<h2>패키지형태의 타이타늄 모듈</h2>

<p>패키지형태의 모듈은 네이티브 코드나 자바스크립트 코드를 포함할 수 있고, 이것을 플랫폼 별로 빌드하거나 패키징할수 있다. 모듈이 패키징될때 네이티브 코드는 컴파일되고, 자바스크립트 코드는 난독화되어 패키징되기 때문에 실제 소스 코드를 공유되지 않고 패키징된 모듈만 배포된다.</p>

<p>패키지형태의 모듈은 네이티브 코드로 만들어지기 때문에 네이티브로 만들수있는 모든 기능을 똑같이 만들수있다. 물론 모바일 웹일 경우 네이티브 언어가 자바스크립트이기 때문에 약간의 제약은 있을수 있다. iOS와 안드로이드의 경우에는 네이티브 코드를 작성할때 특별히 고려해야할 예외사항들이 좀 있다. 뿐만 아니라 타이타늄에 통합되는 모듈 API들도 마찬가지로 고려해야할 사항들이 있다. </p>

<h3>네이티브 모듈</h3>

<p>안드로이드나 iOS용 네이티브 모듈을 만드려면 다음과 같은 개념에 익숙해야한다. </p>

<ul>
<li>프록시</li>
<li>네이티브 모듈 객체</li>
<li>뷰와 뷰 프록시 </li>
<li>자바스크립트와 네이티브 객체를 서로 변환하는 방법</li>
<li>이벤트와 콜백 </li>
<li>스레딩</li>
</ul>

<h4>프록시</h4>

<p><em>프록시</em>는 자바스크립트 API로 노출되는 네이티브 객체를 말한다. 모든 프록시 객체는 네이티브 메소드와 프로퍼티들을 자바스크립트와 연결시켜주는 매커니즘을 제공하는 특별한 프록시 클래스(iOS는 <em>TiProxy</em>, 안드로이드는 <em>KrollProxy</em>)를 상속 받는다.</p>

<p>대부분의 프록시 객체는 랩핑객체이자 프록시 객체로써 UI 컨트롤 같은 네이티브 객체를 만드는데 사용된다. 예를 들어 <em>Ti.UI.Button</em> 객체는 iOS나 안드로이드의 네이티브 버튼 컨트롤을 감싼 프록시 객체다. 마찬가지로 복잡한 데이터 타입이나 자바스크립트와 네이티브 레이어사이에 뭔가를 공유하고 싶을때 이런 프록시 객체를 만들어 사용할수있다. </p>

<p>프록시 객체의 인스턴스를 만들고, 이것을 자바스크립트 레이어로 반환하면 자바스크립트 엔진은 이에 상응하는 자바스크립트 객체를 만들게 된다. 그리고 이 자바스크립트 객체의 메소드를 호출하면 프록시 객체는 이에 상응하는 네이티브 메소드를 호출한다. 결국 자바스크립트 엔진이 네이티브 메소드를 호출하는 셈이다. 자바스크립트 객체의 프로퍼티에 접근할때도 마찬가지다. 각 프로퍼티들은 프록시 객체의 프로퍼티와 연결되고, 자바스크리브 엔진은 setter또는 getter를 호출해서 프로퍼티를 가져오거나 설정한다. 예를 들어 아래 코들 보자. </p>

<pre><code>// 1. 프록시 객체 생성 
var win = Ti.UI.createWindow();
// 2. 프로퍼티 설정
win.title = "Hello World";
// 3. 프록시 메소드 호출
win.open();   
</code></pre>

<p>다음 그림은 위 코드를 실행할때 어떤 일이 벌어지는지를 나타낸다. 
<img src="http://docs.appcelerator.com/titanium/3.0/images/download/attachments/35621751/create_proxy.png" alt="Create Proxy" title="" /></p>

<p>위 코드에서 <em>win</em> 객체는 비록 일반적인 자바스크립트 객체처럼 보이지만 사실상 자바스크립트 객체와 네이티브 프록시 객체를 동시에 가리키므로 매우 중요하다. 기억해두자! 
win 객체의 프로퍼티와 메소드는 네이티브 프록시 객체와 연결되어 있어 사실상 네이티브 프록시 객체를 호출한다. 
그리고 여기에 네이티브 프로퍼티가 아닌 임의의 프로퍼티를 설정하게 되면 약간의 생성시간이 지나고 자바스크립트 객체에 프로퍼티가 추가될 것이다. 하지만 이 속성은 프록시 객체에 생성되지는 <em>않는다.</em> 다음 코드를 보자. </p>

<pre><code>var win = Ti.UI.createWindow();
win.myProp = "Some other string";
win.title = "Hello World";   
</code></pre>

<p>위 예제에서 <em>win</em> 객체에 <em>title</em> 프로퍼티를 설정하는 것은 네이티브 윈도우 프록시 객체에 타이틀을 설정하지만, <em>myProp</em> 프로퍼티는 자바스크립트 객체에만 설정되고 네이티브 레이어로 전달되지는 않는다. </p>

<h4>네이티브 모듈 객체</h4>

<p>여기서 <em>모듈</em>은 네이티브 모듈 타입(<em>Ti.Module</em>이나 <em>KrollModule</em>)을 확장한 모듈로써 네이티브 타이타늄 모듈을 나타낸다. 이 네이티브 모듈 타입은 네이티브 프록시 타입(메소드와 프로퍼티가 자바스크립트에 노출된 모듈)을 상속받는다. 더불어 네이티브 모듈 객체는 식별자(&#39;require&#39;로 인식되는 모듈)로 지정되고, 모듈이 반응하는 라이프 사이클 이벤트가 설정된다. </p>

<p>패키지형태의 모듈은 오직 하나의 네이티브 모듈 클래스를 가질수도 있다. </p>

<p>모든 프록시 객체는 <em>부모</em> 모듈을 갖는다. 부모 모듈은 보통 자식 프록시 객체를 만들수 있는 메소드가 노출되어 있다. 예를 들면 <em>Ti.UI.Button</em> 객체를 만드는 <em>Ti.UI.createButton</em> 메소드를 <em>Ti.UI</em> 모듈이 가지고 있다.</p>

<h4>뷰와 뷰 프록시</h4>

<p>UI 컴포넌트들은 추가로 몇가지 클래스가 더 필요하다. 뷰 프록시는 특별한 프록시 타입으로 <em>TiViewProxy</em>를 상속받는다. TiViewProxy는 </p>

<h4>자바스크립트와 네이티브 객체를 서로 변환하는 방법</h4>

<h4>이벤트와 콜백</h4>

<h4>스레딩</h4>

<h3>패키지형태의 자바스크립트와 하이브리드 모듈</h3></section></div></html>